{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "careerwiki-phase1",
  // account_id는 Pages 프로젝트에서 지원되지 않으므로 CLOUDFLARE_ACCOUNT_ID 환경변수 사용
  // "account_id": "3587865378649966bfb0a814fce73c77",
  "compatibility_date": "2024-09-23",
  "compatibility_flags": ["nodejs_compat"],
  "pages_build_output_dir": "./dist",
  // Cron triggers는 Cloudflare Pages 미리보기 환경에서 지원되지 않습니다.
  // production 배포 시 Worker에 연결할 때 재활성화하세요.
  // "triggers": {
  //   "crons": ["*/30 * * * *"]
  // },
  
  // D1 Database 설정 (모든 데이터 저장 - 직업, 학과, HowTo, 유저 등)
  // remote: true로 개발 환경에서도 Production D1 사용
  // 2026-01-16: careerwiki-jobs → careerwiki-kr 마이그레이션 완료
  "d1_databases": [{
    "binding": "DB",
    "database_name": "careerwiki-kr",
    "database_id": "1dbc57d6-0ce3-4a7e-8d2e-3159b0df1315",
    "remote": true
  }],

  // R2 Storage 설정 (이미지/파일 업로드)
  // remote: true로 개발 환경에서도 Production R2 사용
  "r2_buckets": [{
    "binding": "UPLOADS",
    "bucket_name": "careerwiki-uploads",
    "remote": true
  }],

  // KV Namespace 설정 (세션 저장소)
  "kv_namespaces": [
    {
      "binding": "KV",
      "id": "842ab2c49a76498290858293748de02a"
    }
  ],
  
  // Vectorize 설정 (AI 분석기 후보 검색)
  // ⚠️ 인덱스 재생성 필요 (OpenAI Embedding 1536차원):
  //   1. npx wrangler vectorize delete careerwiki-embeddings
  //   2. npx wrangler vectorize create careerwiki-embeddings --dimensions=1536 --metric=cosine
  // 2026-01-26: OpenAI text-embedding-3-small (1536차원) 전환
  "vectorize": [
    {
      "binding": "VECTORIZE",
      "index_name": "careerwiki-embeddings"
    }
  ],
  
  // Workers AI 설정 (LLM 호출용 - 임베딩은 OpenAI로 전환됨)
  "ai": {
    "binding": "AI"
  },

  // Environment variables (secrets should be set via wrangler secret)
  // For production: wrangler pages secret put CAREER_NET_API_KEY
  "vars": {
    // Public variables (non-sensitive)
    "ENVIRONMENT": "production"
  }
}