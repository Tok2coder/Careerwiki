# ğŸ“Š D1 ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ ë¦¬í¬íŠ¸

**í™•ì¸ ì¼ì‹œ**: 2025-11-06  
**ë°ì´í„°ë² ì´ìŠ¤ ID**: edc21e23-c2ac-4693-bb79-389b6914e173  
**ìœ„ì¹˜**: ë¡œì»¬ D1 (`.wrangler/state/v3/d1/`)

---

## ğŸ” í˜„ì¬ ìƒíƒœ

### âœ… í…Œì´ë¸” êµ¬ì¡°
ë‹¤ìŒ í…Œì´ë¸”ë“¤ì´ ìƒì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

| í…Œì´ë¸”ëª… | ìƒíƒœ | ì„¤ëª… |
|---------|------|------|
| `majors` | âœ… ìƒì„±ë¨ | ì „ê³µ ë°ì´í„° |
| `jobs` | âœ… ìƒì„±ë¨ | ì§ì—… ë°ì´í„° |
| `wiki_pages` | â“ í™•ì¸ í•„ìš” | ISR ìºì‹œ |
| `ai_analysis_requests` | âœ… ìƒì„±ë¨ | AI ë¶„ì„ ìš”ì²­ |
| `ai_analysis_results` | âœ… ìƒì„±ë¨ | AI ë¶„ì„ ê²°ê³¼ |
| `ai_sessions` | âœ… ìƒì„±ë¨ | AI ì„¸ì…˜ |
| `career_analyses` | âœ… ìƒì„±ë¨ | ì§„ë¡œ ë¶„ì„ |
| `comments` | âœ… ìƒì„±ë¨ | ëŒ“ê¸€ |
| `comment_votes` | âœ… ìƒì„±ë¨ | ëŒ“ê¸€ íˆ¬í‘œ |
| `comment_reports` | âœ… ìƒì„±ë¨ | ëŒ“ê¸€ ì‹ ê³  |
| `ip_blocks` | âœ… ìƒì„±ë¨ | IP ì°¨ë‹¨ |
| `serp_interaction_logs` | âœ… ìƒì„±ë¨ | SERP ìƒí˜¸ì‘ìš© ë¡œê·¸ |
| `serp_interaction_daily_summary` | âœ… ìƒì„±ë¨ | SERP ì¼ì¼ ìš”ì•½ |
| `search_index` | âœ… ìƒì„±ë¨ | ê²€ìƒ‰ ì¸ë±ìŠ¤ |
| `update_logs` | âœ… ìƒì„±ë¨ | ì—…ë°ì´íŠ¸ ë¡œê·¸ |
| `major_update_logs` | âœ… ìƒì„±ë¨ | ì „ê³µ ì—…ë°ì´íŠ¸ ë¡œê·¸ |
| `pages` | âœ… ìƒì„±ë¨ | í˜ì´ì§€ |
| `page_revisions` | âœ… ìƒì„±ë¨ | í˜ì´ì§€ ë¦¬ë¹„ì „ |

---

## ğŸ“Š ë°ì´í„° ìˆ˜ì§‘ í˜„í™©

### âš ï¸ í˜„ì¬ ìƒíƒœ: ë°ì´í„° ì—†ìŒ

| í…Œì´ë¸” | ë ˆì½”ë“œ ìˆ˜ | ìƒíƒœ |
|--------|----------|------|
| `majors` | **0ê°œ** | âŒ ë¹„ì–´ìˆìŒ |
| `jobs` | **0ê°œ** | âŒ ë¹„ì–´ìˆìŒ |
| `wiki_pages` | í™•ì¸ í•„ìš” | â“ |

---

## ğŸ” ì›ì¸ ë¶„ì„

### ê°€ëŠ¥í•œ ì›ì¸
1. **GenSpark í™˜ê²½ê³¼ ë¡œì»¬ í™˜ê²½ ë¶„ë¦¬**
   - GenSparkì—ì„œ ì‘ì—…í•œ ë°ì´í„°ëŠ” GenSparkì˜ ë¡œì»¬ D1ì— ì €ì¥ë¨
   - í˜„ì¬ Cursor ë¡œì»¬ í™˜ê²½ì€ ìƒˆë¡œìš´ D1 ì¸ìŠ¤í„´ìŠ¤

2. **ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ ìœ„ì¹˜**
   - ë¡œì»¬ D1 íŒŒì¼: `.wrangler/state/v3/d1/miniflare-D1DatabaseObject/`
   - GenSparkì˜ ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ê³¼ ë‹¤ë¥¸ ìœ„ì¹˜

3. **ì›ê²© ë°ì´í„°ë² ì´ìŠ¤**
   - Phase 1ì—ì„œ ìˆ˜ì§‘í•œ ë°ì´í„°ê°€ Cloudflare ì›ê²© D1ì— ìˆì„ ìˆ˜ ìˆìŒ
   - ì›ê²© í™•ì¸ ì‹œ `CLOUDFLARE_API_TOKEN` í•„ìš”

---

## ğŸš€ í•´ê²° ë°©ë²•

### Option 1: ì›ê²© ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í™•ì¸ (ê¶Œì¥)

**í•„ìš”í•œ ê²ƒ:**
- Cloudflare API Token ì„¤ì •

**í™•ì¸ ë°©ë²•:**
```bash
# 1. API Token ì„¤ì • (í™˜ê²½ ë³€ìˆ˜)
$env:CLOUDFLARE_API_TOKEN="your-token-here"

# 2. ì›ê²© ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸
npx wrangler d1 execute careerwiki-jobs --remote --command="SELECT COUNT(*) FROM majors;"
npx wrangler d1 execute careerwiki-jobs --remote --command="SELECT COUNT(*) FROM jobs;"
```

### Option 2: ë°ì´í„° ì¬ì‹œë”©

GenSparkì—ì„œ ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ìˆ˜ì§‘:

```bash
# ì „ê³µ ë°ì´í„° ì‹œë”©
npx tsx src/scripts/seedAllMajors.ts

# ì§ì—… ë°ì´í„° ì‹œë”©
npx tsx src/scripts/seedAllJobs.ts
```

**ì˜ˆìƒ ì†Œìš” ì‹œê°„:**
- ì „ê³µ 1,424ê°œ: ì•½ 2-3ì‹œê°„
- ì§ì—… 587ê°œ: ì•½ 1-2ì‹œê°„

### Option 3: GenSpark ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ ë³µì‚¬

GenSpark í™˜ê²½ì—ì„œ D1 ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ì„ ë³µì‚¬:
- GenSpark D1 ìœ„ì¹˜ í™•ì¸
- SQLite íŒŒì¼ ë³µì‚¬
- ë¡œì»¬ `.wrangler/state/v3/d1/` ìœ„ì¹˜ì— ë¶™ì—¬ë„£ê¸°

---

## ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ í™•ì¸í•  ê²ƒ
1. [ ] Cloudflare ì›ê²© D1ì— ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸
2. [ ] GenSpark í™˜ê²½ì˜ D1 íŒŒì¼ ìœ„ì¹˜ í™•ì¸
3. [ ] ë°ì´í„° ì¬ì‹œë”© í•„ìš” ì—¬ë¶€ ê²°ì •

### ë°ì´í„° ì¬ì‹œë”© ì‹œ
1. [ ] API í‚¤ í™•ì¸ (`.dev.vars` íŒŒì¼)
2. [ ] ì „ê³µ ë°ì´í„° ì‹œë”© ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
3. [ ] ì§ì—… ë°ì´í„° ì‹œë”© ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
4. [ ] ë°ì´í„° í’ˆì§ˆ ê²€ì¦

---

## ğŸ”§ ìœ ìš©í•œ ëª…ë ¹ì–´

### ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸
```bash
# í…Œì´ë¸” ëª©ë¡
npx wrangler d1 execute careerwiki-jobs --local --command="SELECT name FROM sqlite_master WHERE type='table';"

# ì „ê³µ ìˆ˜
npx wrangler d1 execute careerwiki-jobs --local --command="SELECT COUNT(*) FROM majors;"

# ì§ì—… ìˆ˜
npx wrangler d1 execute careerwiki-jobs --local --command="SELECT COUNT(*) FROM jobs;"

# ìƒ˜í”Œ ë°ì´í„° í™•ì¸
npx wrangler d1 execute careerwiki-jobs --local --command="SELECT id, name FROM majors LIMIT 5;"
```

### ë°ì´í„° ì†ŒìŠ¤ë³„ í†µê³„
```bash
# ì „ê³µ ë°ì´í„° ì†ŒìŠ¤ë³„ í†µê³„
npx wrangler d1 execute careerwiki-jobs --local --command="
SELECT 
  (SELECT COUNT(*) FROM majors WHERE careernet_id IS NOT NULL) as careernet_count,
  (SELECT COUNT(*) FROM majors WHERE goyong24_id IS NOT NULL) as goyong24_count,
  (SELECT COUNT(*) FROM majors) as total;
"

# ì§ì—… ë°ì´í„° ì†ŒìŠ¤ë³„ í†µê³„
npx wrangler d1 execute careerwiki-jobs --local --command="
SELECT 
  (SELECT COUNT(*) FROM jobs WHERE careernet_id IS NOT NULL) as careernet_count,
  (SELECT COUNT(*) FROM jobs WHERE goyong24_id IS NOT NULL) as goyong24_count,
  (SELECT COUNT(*) FROM jobs) as total;
"
```

---

## ğŸ“ ì°¸ê³ 

- **ë°ì´í„°ë² ì´ìŠ¤ ID**: `edc21e23-c2ac-4693-bb79-389b6914e173`
- **ë¡œì»¬ íŒŒì¼ ìœ„ì¹˜**: `.wrangler/state/v3/d1/miniflare-D1DatabaseObject/`
- **ë§ˆì´ê·¸ë ˆì´ì…˜**: 8ê°œ ì¤‘ 7ê°œ ì„±ê³µ (1ê°œ ì‹¤íŒ¨ - `0003_wiki_architecture.sql`)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-06

